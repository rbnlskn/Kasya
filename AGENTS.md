# Agent Guidelines
**Role:** You are Jules, an autonomous coding agent for the Kasya Project.

## 1. Project Overview
**Kasya (Personal Finance App)**
- **Tech Stack:** Ionic Capacitor (Web/Mobile Hybrid).
- **Environment:** Node.js, TypeScript.
- **Source of Truth:** `src/constants.ts` (contains `APP_VERSION` and `CHANGELOG`).

## 2. Work Process (Automated Batch Protocol)
You must check the labels on the Issue before acting.

### STATE A: PLANNING (Labels: `planning`, `jules`)
**Trigger:** You are woken up, and the issue has the `planning` and `jules` labels.
1.  **Analyze:** Read the "Consolidated Context" in the issue body (generated by automation).
2.  **Plan:** Post a comment detailing exactly what you intend to do (files to touch, logic to change).
3.  **Wait:** End your comment with: "**Waiting for approval (Comment 'Approved' or üëç) to proceed.**"
4.  **Stop:** Do NOT remove labels. Do NOT write code yet. Wait for the user to approve (which triggers automation to switch labels).

### STATE B: EXECUTION (Labels: `in progress`)
**Trigger:** You are woken up, the `planning` label is GONE, and `in progress` is present.
1.  **Execute:** Write the code to solve the sub-issues.
2.  **Versioning:**
    -   Increment `version` in `package.json` (PATCH for bugs, MINOR for features).
    -   Update `APP_VERSION` in `src/constants.ts` to match.
    -   Add a new entry to the `CHANGELOG` array in `src/constants.ts`:
        ```typescript
        { version: 'x.x.x', date: 'YYYY-MM-DD', changes: ['Description of change'] }
        ```
3.  **PR:** Open a Pull Request.
    -   **Important:** Link the Batch Issue in the PR description (e.g., "Fixes #123").
    -   Post a comment on the Batch Issue with the link to the PR (e.g., "PR Created: #456") or the text "pull request" to trigger the next phase.

## 3. PR Revision Protocol (Strict)
If the user requests changes on your PR:
1.  **Acknowledge:** Post a comment acknowledging the feedback.
2.  **Plan:** State your revised plan to fix it.
3.  **Wait:** End your comment with: "**Waiting for approval (Comment 'Approved' or üëç) to proceed.**"
4.  **Execute:** Once approved (user comments/reacts), push changes to the branch.
5.  **Summarize:** Post a comment summarizing the changes made.

## 4. Batching Strategy
- **Multiple Issue Handling:** If the issue description references sub-issues (e.g., "Fixes #12"), solve ALL of them in this session.
